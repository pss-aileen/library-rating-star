(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.ratingStar={}))})(this,function(o){"use strict";var d=Object.defineProperty;var S=(o,s,a)=>s in o?d(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a;var i=(o,s,a)=>S(o,typeof s!="symbol"?s+"":s,a);function s(l){return!Number.isInteger(l)}function a(l){const e=Math.round(l*10)/10;return parseFloat(e.toFixed(1))}class c{constructor(e,t){i(this,"givenStars");i(this,"totalStars");i(this,"starDoms");i(this,"filledStarIcon");i(this,"emptyStarIcon");this.givenStars=e,this.totalStars=t,this.starDoms=[],this.filledStarIcon="★",this.emptyStarIcon="★",this.wrapAllStars()}displayStar(){const e=this.filledStarIcon.repeat(this.givenStars),t=this.emptyStarIcon.repeat(this.totalStars-this.givenStars);console.log(e+t)}getRatingIcon(){const e=this.filledStarIcon.repeat(Math.ceil(this.givenStars)),t=this.emptyStarIcon.repeat(this.totalStars-Math.ceil(this.givenStars));return e+t}wrapAllStars(){const e=this.getRatingIcon().split("");for(let t=0;t<e.length;t++){const r=this.wrapWithSpan(e[t],t);this.starDoms.push(r)}}wrapWithSpan(e,t){const r=document.createElement("span");if(r.textContent=e,s(this.givenStars)){if(Math.floor(this.givenStars)===t){r.classList.add("rs-control");const n=(this.givenStars%1*10).toFixed(0);r.classList.add(`rs-${n}`)}Math.floor(this.givenStars)<t&&r.classList.add("rs-empty")}return this.givenStars<=t&&r.classList.add("rs-empty"),r}appendSpan(e){e.textContent="";const t=document.createDocumentFragment();this.starDoms.map(r=>{t.appendChild(r)}),e.appendChild(t)}}class p{constructor(e={}){i(this,"filledColor");i(this,"emptyColor");this.filledColor=e.filledColor||"gold",this.emptyColor=e.emptyColor||"#eee",this.init(),this.setColor()}setColor(){document.documentElement.style.setProperty("--rs-color",this.filledColor),document.documentElement.style.setProperty("--rs-empty-color",this.emptyColor)}init(){const e=document.querySelectorAll(".rs");for(const t of e)if(t.textContent!==null){let[r,n]=t.textContent.split("/").map(Number);if(!r&&r!==0||!n&&n!==0){console.error("数値が入力されていません 3/5 のような形で指定してください:",t);return}if(n===0){console.error("合計の数は1以上にしてください。");return}if(r>n){console.error("givenStarsはtotalStarsより大きい値を指定しないでください。");return}if(s(n)){console.error("合計数は整数で指定してください。",t);return}s(r)&&(r=a(r)),new c(r,n).appendSpan(t)}}}o.RaitingStar=p,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
