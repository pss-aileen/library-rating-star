(function(s,o){typeof exports=="object"&&typeof module<"u"?module.exports=o():typeof define=="function"&&define.amd?define(o):(s=typeof globalThis<"u"?globalThis:s||self,s.RatingStar=o())})(this,function(){"use strict";var p=Object.defineProperty;var h=(s,o,a)=>o in s?p(s,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[o]=a;var i=(s,o,a)=>h(s,typeof o!="symbol"?o+"":o,a);function s(c){return!Number.isInteger(c)}function o(c){const e=Math.round(c*10)/10;return parseFloat(e.toFixed(1))}class a{constructor(e,t){i(this,"givenStars");i(this,"totalStars");i(this,"starDoms");i(this,"filledStarIcon");i(this,"emptyStarIcon");this.givenStars=e,this.totalStars=t,this.starDoms=[],this.filledStarIcon="★",this.emptyStarIcon="★",this.wrapAllStars()}displayStar(){const e=this.filledStarIcon.repeat(this.givenStars),t=this.emptyStarIcon.repeat(this.totalStars-this.givenStars);console.log(e+t)}getRatingIcon(){const e=this.filledStarIcon.repeat(Math.ceil(this.givenStars)),t=this.emptyStarIcon.repeat(this.totalStars-Math.ceil(this.givenStars));return e+t}wrapAllStars(){const e=this.getRatingIcon().split("");for(let t=0;t<e.length;t++){const r=this.wrapWithSpan(e[t],t);this.starDoms.push(r)}}wrapWithSpan(e,t){const r=document.createElement("span");if(r.textContent=e,s(this.givenStars)){if(Math.floor(this.givenStars)===t){r.classList.add("rs-control");const n=(this.givenStars%1*10).toFixed(0);r.classList.add(`rs-${n}`)}Math.floor(this.givenStars)<t&&r.classList.add("rs-empty")}return this.givenStars<=t&&r.classList.add("rs-empty"),r}appendSpan(e){e.textContent="";const t=document.createDocumentFragment();this.starDoms.map(r=>{t.appendChild(r)}),e.appendChild(t)}}class d{constructor(){i(this,"filledColor");i(this,"emptyColor");this.filledColor="gold",this.emptyColor="#eee",this.announce()}announce(){console.log("Ready for Rating Star.")}init(e={}){this.filledColor=e.filledColor||"gold",this.emptyColor=e.emptyColor||"#eee";const t=document.querySelectorAll(".rs");for(const r of t)if(r.textContent!==null){let[n,l]=r.textContent.split("/").map(Number);if(!n&&n!==0||!l&&l!==0){console.error("数値が入力されていません 3/5 のような形で指定してください:",r);return}if(l===0){console.error("合計の数は1以上にしてください。");return}if(n>l){console.error("givenStarsはtotalStarsより大きい値を指定しないでください。");return}if(s(l)){console.error("合計数は整数で指定してください。",r);return}s(n)&&(n=o(n)),new a(n,l).appendSpan(r)}this.setColor()}setColor(){document.documentElement.style.setProperty("--rs-color",this.filledColor),document.documentElement.style.setProperty("--rs-empty-color",this.emptyColor)}}return d});
